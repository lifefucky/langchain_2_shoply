# langchain_2_shoply

## Что должно получиться
- Шаблон промпта на основе YAML-гайда тона бренда.
- Few-shot примеры, автоматически подмешиваемые в промпт.
- Ответы строго по схеме: answer, tone, actions (структурированный JSON).
- Автооценка стиля (LLM-оценка + простые регулы) и отчёт reports/style_eval.json.
- Обновлённый чат-бот, который сохранил функционал М1 (FAQ, /order) и говорит в фирменной манере.

## Критерии зачёта (чек-лист)
- Репозиторий на GitHub с читаемым README и инструкцией запуска.
- Конфиги: .env.example, requirements.txt, data/style_guide.yaml, data/few_shots.jsonl.
- Реализован LangChain-chain с ChatOpenAI и ChatPromptTemplate.
- Ответы парсятся в Pydantic-модель (структурированный вывод) или через with_structured_output.
- Скрипт src/style_eval.py даёт средний score ≥ 80/100 на 10 тестовых промптах и сохраняет отчёт.
- Бот «не выдумывает» факты вне FAQ/заказов; при отсутствии данных — корректно отказывает.
- Локальный запуск командой из README проходит без ошибок.

# Запуск проекта - Команды

## Установка зависимостей

```bash
pip install -r requirements.txt
```

Установит все необходимые пакеты из `requirements.txt`.

---

## Настройка окружения

```bash
cp .env.example .env
```

Скопирует шаблон конфига. Затем **отредактируй `.env`** и впиши:
- `OPENAI_API_KEY` — обязательно
- `OPENAI_MODEL` — опционально (по умолчанию `gpt-4o-mini`)

---

## Запуск демо цепочки

```bash
python src/brand_chain.py
```

Демонстрирует работу RAG цепочки с FAQ.

---

## Запуск чат-бота

```bash
python app_lc.py
```

Интерактивный чат-бот в стиле бренда (используй команды `/order <id>` для заказов).

---

## Автооценка ответов

```bash
python src/style_eval.py
```

Оценивает ответы по правилам стиля и LLM. Результат сохранится в `reports/style_eval.json`.

---

## Логирование

Все логи записываются в `logs/app.jsonl` в JSON формате.

Проверь логи:
```bash
Get-Content logs/app.jsonl
```

